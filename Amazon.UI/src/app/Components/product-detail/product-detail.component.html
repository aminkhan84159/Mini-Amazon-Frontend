<div class="container">
  <div class="images">
    <p-carousel [value]="product.images" [numVisible]="1" [numScroll]="1" [circular]="true" autoplayInterval="3000">
      <ng-template let-pro #item>
        <img src="data:image/jpeg;base64,{{pro.images}}" alt="{{ product.title }}">
      </ng-template>
    </p-carousel>
  </div>
  <mat-card class="product-card">
    <mat-card-header>
      <mat-card-title>{{ product.title }}</mat-card-title>
      <mat-card-subtitle>{{ product.brand }}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      @if(product.productDetails?.discount > 0){
      <h3 class="price">
        <span class="original-price">${{ product.price }}</span>
        <span class="discount-price">${{ (product.price - (product.price * product.productDetails.discount / 100)).toFixed(2) }}</span>
      </h3>
    }@else {
      <span>${{product.price}}</span>
    }
      <p>Rating: {{ product.rating }}</p>
      <p>Stock: {{ product.productDetails?.stock }}</p>
      <p>Category: {{ product.category }}</p>
      <p>Brand: {{ product.brand }}</p>
      <p>SKU: {{ product.productDetails?.sku }}</p>
      <p>Weight: {{ product.productDetails?.weight }} g</p>
      <p>Warranty: {{ product.productDetails?.warranty }}</p>

      <p>{{ product.productDetails?.description }}</p>
      
      <mat-divider class="mat-div"></mat-divider>

      <h4>Tags</h4>
      <mat-chip-set>
        <mat-chip *ngFor="let tag of product.tags">{{ tag.tags }}</mat-chip>
      </mat-chip-set>

      <mat-divider class="mat-div"></mat-divider>

      <h4>Customer Reviews</h4>
      <mat-icon mat-list-icon>reviews</mat-icon>
      <mat-list *ngFor="let review of product.reviews">
        <mat-list-item >
          <div>
            {{ review.reviewerName }} - {{ review.createdOn | date:'yyyy-MM-dd' }}<br />
            <strong>{{ review.rating }}â˜…</strong> - {{ review.comment }}
          </div>
        </mat-list-item>
      </mat-list>

      <mat-divider class="mat-div"></mat-divider>

      <p><strong>Return Policy:</strong> {{ product.productDetails?.returnPolicy }}</p>
    </mat-card-content>

    <mat-card-actions style="margin-left: 650px;">
      <button mat-raised-button color="primary" (click)="addToCart(product.productId)">Add to Cart</button>
    </mat-card-actions>
  </mat-card>

</div>
